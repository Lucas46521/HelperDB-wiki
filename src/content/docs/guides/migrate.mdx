
---
title: "Migra√ß√£o do Quick.db para Helper.db"
description: "Guia completo para caso voc√™ precise migrar seus projetos do Quick.db para Helper.db de forma simples e segura"
---

# üîÑ Migra√ß√£o do Quick.db para Helper.db

## ‚ú® Vis√£o Geral
Tendo em vista que **Helper.db** √© uma continua√ß√£o ao legado do **Quick.db** ele tem compatibilidade nativa mas se houver necessidade de migra√ß√£o segue o guia abaixo.
Para te ajudar a migrar seus projetos do **Quick.db** para **Helper.db** de forma r√°pida e segura. O Helper.db foi criado para continuar o legado do Quick.db com melhorias e recursos adicionais.

### üéØ Por que migrar?

* üöÄ **Performance melhorada**: At√© 300% mais r√°pido em opera√ß√µes em lote
* üÜï **Novos recursos**: Sistema de busca avan√ßado, agrega√ß√µes, cache inteligente
* üõ°Ô∏è **Manuten√ß√£o ativa**: Corre√ß√µes de bugs e atualiza√ß√µes regulares
* üìö **Documenta√ß√£o completa**: Wiki oficial e exemplos pr√°ticos
* üîÑ **Compatibilidade**: API compat√≠vel com Quick.db

## üì¶ Instala√ß√£o

### 1. Instalar Helper.db

```bash
npm install helper.db better-sqlite3
```

### 2. Remover Quick.db (opcional)

```bash
npm uninstall quick.db
```

## üîÑ Migra√ß√£o Autom√°tica

### M√©todo 1: Usando o m√©todo `migrateFromQuickDB()`

O Helper.db possui um m√©todo dedicado para migra√ß√£o autom√°tica:

```javascript
const { HelperDB } = require("helper.db");

async function migrarDados() {
    const db = new HelperDB();
    
    try {
        // Migrar dados do arquivo SQLite do Quick.db
        const resultado = await db.migrateFromQuickDB('./json.sqlite');
        
        console.log(`‚úÖ Migra√ß√£o conclu√≠da com sucesso!`);
        console.log(`üìä ${resultado.migrated}/${resultado.total} registros migrados`);
        console.log(`‚è∞ Migrado em: ${resultado.timestamp}`);
        
    } catch (error) {
        console.error('‚ùå Erro na migra√ß√£o:', error.message);
    }
}

migrarDados();
```

### Eventos de Migra√ß√£o

Monitore o progresso da migra√ß√£o com eventos:

```javascript
const { HelperDB } = require("helper.db");
const db = new HelperDB();

// Antes da migra√ß√£o iniciar
db.on('beforeMigration', (data) => {
    console.log('üîÑ Iniciando migra√ß√£o de:', data.source);
    console.log('üìÇ Arquivo:', data.filePath);
});

// Migra√ß√£o conclu√≠da com sucesso
db.on('migrationComplete', (data) => {
    console.log('‚úÖ Migra√ß√£o conclu√≠da!');
    console.log('üìä Registros migrados:', data.migrated);
    console.log('üìà Total de registros:', data.total);
    console.log('‚è∞ Data/Hora:', data.timestamp);
});

// Erro durante a migra√ß√£o
db.on('migrationError', (data) => {
    console.error('‚ùå Erro na migra√ß√£o:', data.error);
    console.error('üìä Status:', data.status);
});

// Executar migra√ß√£o
async function executarMigracao() {
    try {
        const resultado = await db.migrateFromQuickDB('./json.sqlite');
        console.log('üéâ Processo conclu√≠do:', resultado);
    } catch (error) {
        console.error('üí• Falha na migra√ß√£o:', error.message);
    }
}

executarMigracao();
```

## üîÑ Migra√ß√£o Manual

### M√©todo 2: Backup e Restore

Se voc√™ preferir ter mais controle sobre o processo:

```javascript
const { HelperDB } = require("helper.db");
const QuickDB = require("quick.db"); // Manter temporariamente

async function migracaoManual() {
    // Inst√¢ncia do Quick.db (origem)
    const quickDB = new QuickDB();
    
    // Inst√¢ncia do Helper.db (destino)
    const helperDB = new HelperDB();
    
    try {
        // 1. Obter todos os dados do Quick.db
        const todosOsDados = quickDB.all();
        
        console.log(`üìä Encontrados ${todosOsDados.length} registros para migrar`);
        
        // 2. Migrar dados um por um
        let migrados = 0;
        for (const item of todosOsDados) {
            try {
                await helperDB.set(item.ID, item.data);
                migrados++;
                
                // Progress log a cada 100 registros
                if (migrados % 100 === 0) {
                    console.log(`üìà Migrados: ${migrados}/${todosOsDados.length}`);
                }
            } catch (error) {
                console.warn(`‚ö†Ô∏è Erro ao migrar registro ${item.ID}:`, error.message);
            }
        }
        
        console.log(`‚úÖ Migra√ß√£o conclu√≠da: ${migrados}/${todosOsDados.length} registros`);
        
        // 3. Verificar migra√ß√£o
        const totalHelper = await helperDB.count();
        console.log(`üîç Verifica√ß√£o: ${totalHelper} registros no Helper.db`);
        
    } catch (error) {
        console.error('‚ùå Erro na migra√ß√£o manual:', error.message);
    }
}

migracaoManual();
```

## üìù Altera√ß√µes no C√≥digo

### Importa√ß√£o

**Antes (Quick.db):**
```javascript
const db = require("quick.db");
```

**Depois (Helper.db):**
```javascript
const { HelperDB } = require("helper.db");
const db = new HelperDB();
```

### Uso B√°sico

A API permanece **100% compat√≠vel**:

```javascript
// ‚úÖ Funciona igual nos dois
await db.set("usuario.nome", "Jo√£o");
await db.get("usuario.nome");
await db.add("usuario.pontos", 10);
await db.push("usuario.itens", "item1");
await db.has("usuario");
await db.delete("usuario.temp");
```

### Novos Recursos (Opcionais)

Aproveite os novos recursos do Helper.db:

```javascript
// üîç Sistema de busca avan√ßado
const usuarios = await db.search("Jo√£o", "nome");
const adultos = await db.between(18, 65, "idade");

// üìä Estat√≠sticas e agrega√ß√µes
const stats = await db.aggregate([
    { type: 'count' },
    { type: 'avg', field: 'idade' },
    { type: 'sum', field: 'pontos' }
]);

// üíæ Backup autom√°tico
await db.backup('./backup.json');

// ü©∫ Monitoramento
const ping = await db.ping();
console.log(`Lat√™ncia: ${ping.latency}ms`);
```

## üõ†Ô∏è Configura√ß√µes Avan√ßadas

### Personaliza√ß√£o da Inst√¢ncia

```javascript
const { HelperDB } = require("helper.db");

const db = new HelperDB({
    filePath: "minha-base.sqlite",  // Caminho personalizado
    table: "dados",                 // Nome da tabela
    enableCache: true,              // Cache inteligente
    cacheSize: 2000,               // Tamanho do cache
    enableBackup: true,            // Backup autom√°tico
    backupOptions: {
        interval: 1800000,         // 30 minutos
        maxBackups: 12,            // Manter 12 backups
        path: "./backups"          // Pasta de backups
    }
});
```

### M√∫ltiplas Tabelas

```javascript
// Quick.db com tabelas
const usuarios = new db.table("usuarios");
const produtos = new db.table("produtos");

// Helper.db com tabelas
const usuarios = db.table("usuarios");
const produtos = db.table("produtos");
```

## ‚úÖ Checklist de Migra√ß√£o

### Antes de Migrar

- [ ] **Backup completo**: Fa√ßa backup do seu arquivo `json.sqlite`
- [ ] **Teste em ambiente de desenvolvimento**: Nunca teste em produ√ß√£o primeiro
- [ ] **Documente depend√™ncias**: Liste todos os pontos que usam a base de dados
- [ ] **Verifique vers√£o do Node.js**: Helper.db requer Node.js 12+

### Durante a Migra√ß√£o

- [ ] **Execute a migra√ß√£o autom√°tica**: Use `migrateFromQuickDB()`
- [ ] **Monitore os logs**: Acompanhe eventos de migra√ß√£o
- [ ] **Verifique integridade**: Compare contagem de registros
- [ ] **Teste funcionalidades**: Confirme que tudo funciona

### Ap√≥s a Migra√ß√£o

- [ ] **Atualize imports**: Substitua `require("quick.db")` por `require("helper.db")`
- [ ] **Teste em produ√ß√£o**: Fa√ßa testes graduais
- [ ] **Configure novos recursos**: Cache, backup autom√°tico, etc.
- [ ] **Remova Quick.db**: `npm uninstall quick.db` quando estiver seguro

## üö® Problemas Comuns e Solu√ß√µes

### Erro: "Cannot find module 'better-sqlite3'"

```bash
# Solu√ß√£o: Instalar depend√™ncia
npm install better-sqlite3
```

### Erro: "Migration failed: ENOENT"

```javascript
// Solu√ß√£o: Verificar caminho do arquivo
const fs = require('fs');
if (fs.existsSync('./json.sqlite')) {
    console.log('‚úÖ Arquivo encontrado');
} else {
    console.log('‚ùå Arquivo n√£o encontrado');
}
```

### Dados n√£o aparecem ap√≥s migra√ß√£o

```javascript
// Solu√ß√£o: Verificar tabela correta
const db = new HelperDB({ table: "json" }); // Tabela padr√£o do Quick.db
```

### Performance lenta na migra√ß√£o

```javascript
// Solu√ß√£o: Migra√ß√£o em lotes
async function migracaoEmLotes() {
    const db = new HelperDB();
    const dados = /* seus dados */;
    const loteSize = 100;
    
    for (let i = 0; i < dados.length; i += loteSize) {
        const lote = dados.slice(i, i + loteSize);
        const entries = lote.map(item => [item.id, item.value]);
        
        await db.setMany(entries);
        console.log(`Processado lote ${Math.floor(i/loteSize) + 1}`);
    }
}
```

## üéØ Exemplo Completo de Migra√ß√£o

```javascript
const { HelperDB } = require("helper.db");

class MigradorQuickDB {
    constructor() {
        this.db = new HelperDB();
        this.setupEventos();
    }
    
    setupEventos() {
        this.db.on('beforeMigration', (data) => {
            console.log(`üîÑ Iniciando migra√ß√£o de ${data.source}`);
        });
        
        this.db.on('migrationComplete', (data) => {
            console.log(`‚úÖ ${data.migrated} registros migrados com sucesso`);
        });
        
        this.db.on('migrationError', (data) => {
            console.error(`‚ùå Erro: ${data.error}`);
        });
    }
    
    async migrar(caminhoArquivo = './json.sqlite') {
        try {
            console.log('üöÄ Iniciando processo de migra√ß√£o...');
            
            // Fazer backup antes da migra√ß√£o
            const backup = `./backup-pre-migration-${Date.now()}.json`;
            console.log(`üíæ Criando backup em: ${backup}`);
            
            // Executar migra√ß√£o
            const resultado = await this.db.migrateFromQuickDB(caminhoArquivo);
            
            console.log('üìä Resultado da migra√ß√£o:');
            console.log(`   - Registros migrados: ${resultado.migrated}`);
            console.log(`   - Total de registros: ${resultado.total}`);
            console.log(`   - Status: ${resultado.status}`);
            console.log(`   - Timestamp: ${resultado.timestamp}`);
            
            // Verifica√ß√£o final
            await this.verificarMigracao();
            
            console.log('üéâ Migra√ß√£o conclu√≠da com sucesso!');
            return resultado;
            
        } catch (error) {
            console.error('üí• Falha na migra√ß√£o:', error.message);
            throw error;
        }
    }
    
    async verificarMigracao() {
        const total = await this.db.count();
        const sample = await this.db.limit(5);
        
        console.log(`üîç Verifica√ß√£o: ${total} registros encontrados`);
        console.log('üìã Amostra dos dados:');
        sample.forEach((item, index) => {
            console.log(`   ${index + 1}. ${item.id}: ${JSON.stringify(item.value).slice(0, 50)}...`);
        });
    }
}

// Uso
async function executarMigracao() {
    const migrador = new MigradorQuickDB();
    
    try {
        await migrador.migrar('./json.sqlite');
        console.log('‚ú® Processo de migra√ß√£o finalizado!');
    } catch (error) {
        console.error('‚ùå Processo falhou:', error.message);
        process.exit(1);
    }
}

// Executar se arquivo for chamado diretamente
if (require.main === module) {
    executarMigracao();
}

module.exports = MigradorQuickDB;
```

## üìö Recursos Adicionais

### Links √öteis

- üìñ **Wiki Oficial**: [helper-db-wiki.vercel.app](https://helper-db-wiki.vercel.app/)
- üì¶ **NPM Package**: [npmjs.com/package/helper.db](https://www.npmjs.com/package/helper.db)
- üêõ **Issues**: [GitHub Issues](https://github.com/Lucas46521/Helper.db/issues)
- üí¨ **Discuss√µes**: [GitHub Discussions](https://github.com/Lucas46521/Helper.db/discussions)

### Comandos √öteis

```bash
# Verificar vers√£o instalada
npm list helper.db

# Atualizar para vers√£o mais recente
npm update helper.db

# Verificar integridade da instala√ß√£o
npm audit
```

---

## ü§ù Suporte

Se voc√™ encontrar problemas durante a migra√ß√£o:

1. **Consulte este guia** primeiro
2. **Verifique a documenta√ß√£o** 
3. **Procure em issues existentes** no GitHub
4. **Abra uma nova issue** se necess√°rio
5. **Participe das discuss√µes** da comunidade

**Migra√ß√£o bem-sucedida! üéâ**

Agora voc√™ pode aproveitar todos os recursos avan√ßados do Helper.db mantendo a simplicidade que voc√™ j√° conhecia do Quick.db.
