
---
title: distinct
description: Retorna valores √∫nicos de um campo espec√≠fico
---

# distinct()

Retorna uma lista de valores √∫nicos encontrados em um campo espec√≠fico, eliminando duplicatas e fornecendo uma vis√£o clara dos dados √∫nicos armazenados.

## Sintaxe

```typescript
await db.distinct(field: string, key?: string): Promise<any[]>
```

## Par√¢metros

- `field` (obrigat√≥rio): Nome do campo para buscar valores √∫nicos
- `key` (opcional): Chave espec√≠fica para buscar em array ou objeto

## Retorno

Array contendo todos os valores √∫nicos encontrados no campo especificado.

## Exemplos

### Valores √önicos em Dados de Usu√°rios

```javascript
await db.set('user.123', { name: 'Jo√£o', age: 25, city: 'S√£o Paulo', role: 'admin' });
await db.set('user.456', { name: 'Maria', age: 30, city: 'Rio de Janeiro', role: 'user' });
await db.set('user.789', { name: 'Pedro', age: 25, city: 'S√£o Paulo', role: 'user' });
await db.set('user.101', { name: 'Ana', age: 35, city: 'Belo Horizonte', role: 'admin' });

// Buscar todas as cidades √∫nicas
const cities = await db.distinct('city');
console.log(cities);
// ['S√£o Paulo', 'Rio de Janeiro', 'Belo Horizonte']

// Buscar todas as idades √∫nicas
const ages = await db.distinct('age');
console.log(ages);
// [25, 30, 35]

// Buscar todos os roles √∫nicos
const roles = await db.distinct('role');
console.log(roles);
// ['admin', 'user']
```

### Distinct em Array Espec√≠fico

```javascript
await db.set('products', [
  { id: 1, name: 'Notebook', category: 'Electronics', brand: 'Dell' },
  { id: 2, name: 'Mouse', category: 'Electronics', brand: 'Logitech' },
  { id: 3, name: 'Chair', category: 'Furniture', brand: 'IKEA' },
  { id: 4, name: 'Keyboard', category: 'Electronics', brand: 'Dell' },
  { id: 5, name: 'Desk', category: 'Furniture', brand: 'IKEA' }
]);

// Buscar categorias √∫nicas nos produtos
const categories = await db.distinct('category', 'products');
console.log(categories);
// ['Electronics', 'Furniture']

// Buscar marcas √∫nicas nos produtos
const brands = await db.distinct('brand', 'products');
console.log(brands);
// ['Dell', 'Logitech', 'IKEA']
```

### An√°lise de Dados de E-commerce

```javascript
await db.set('orders', [
  { orderId: '001', status: 'delivered', paymentMethod: 'credit_card', amount: 150.00 },
  { orderId: '002', status: 'pending', paymentMethod: 'pix', amount: 75.50 },
  { orderId: '003', status: 'delivered', paymentMethod: 'credit_card', amount: 200.00 },
  { orderId: '004', status: 'cancelled', paymentMethod: 'debit_card', amount: 99.90 },
  { orderId: '005', status: 'delivered', paymentMethod: 'pix', amount: 300.00 }
]);

// Analisar status √∫nicos dos pedidos
const orderStatuses = await db.distinct('status', 'orders');
console.log('Status dispon√≠veis:', orderStatuses);
// ['delivered', 'pending', 'cancelled']

// M√©todos de pagamento √∫nicos
const paymentMethods = await db.distinct('paymentMethod', 'orders');
console.log('M√©todos de pagamento:', paymentMethods);
// ['credit_card', 'pix', 'debit_card']
```

### Combinando com Outros M√©todos

```javascript
// Primeiro, obter valores √∫nicos
const uniqueRoles = await db.distinct('role');
console.log('Roles √∫nicos:', uniqueRoles);

// Depois, contar quantos usu√°rios t√™m cada role
for (const role of uniqueRoles) {
  const count = await db.compare('role', '==', role);
  console.log(`${role}: ${count.length} usu√°rios`);
}

// Ou usar agrega√ß√£o para an√°lise completa
const roleStats = await db.aggregate([
  { type: 'distinct', field: 'role' },
  { type: 'count' }
]);
console.log('Estat√≠sticas de roles:', roleStats);
```

## Casos de Uso

### üìä **An√°lise de Dados**
```javascript
// Dashboard de vendas - categorias de produtos
const productCategories = await db.distinct('category', 'inventory');

// Relat√≥rio de clientes - pa√≠ses √∫nicos
const countries = await db.distinct('country', 'customers');
```

### üéØ **Filtros Din√¢micos**
```javascript
// Criar filtros para interface de usu√°rio
const availableFilters = {
  brands: await db.distinct('brand', 'products'),
  sizes: await db.distinct('size', 'products'),
  colors: await db.distinct('color', 'products')
};
```

### üìà **Relat√≥rios Estat√≠sticos**
```javascript
// An√°lise de comportamento de usu√°rios
const uniqueDevices = await db.distinct('device', 'userSessions');
const uniqueLocations = await db.distinct('location', 'userSessions');

console.log(`Acessos de ${uniqueDevices.length} tipos de dispositivos diferentes`);
console.log(`Usu√°rios de ${uniqueLocations.length} localiza√ß√µes diferentes`);
```

## Caracter√≠sticas Importantes

### ‚úÖ **Elimina√ß√£o de Duplicatas**
- Remove automaticamente valores duplicados
- Preserva a ordem de primeira ocorr√™ncia
- Funciona com qualquer tipo de dados

### üöÄ **Performance Otimizada**
- Processamento eficiente para grandes conjuntos de dados
- Utiliza estruturas de dados otimizadas internamente
- Cache inteligente para consultas repetidas

### üîç **Flexibilidade de Busca**
- Suporta busca em objetos globais ou arrays espec√≠ficos
- Funciona com campos aninhados usando nota√ß√£o de ponto
- Compat√≠vel com qualquer tipo de valor

## Valida√ß√£o e Erros

```javascript
// ‚ùå Erro: Campo obrigat√≥rio n√£o fornecido
try {
  await db.distinct();
} catch (error) {
  console.log(error.message); // "Field parameter is required"
}

// ‚ùå Erro: Chave n√£o existe
const result = await db.distinct('nonexistent', 'invalidKey');
console.log(result); // []

// ‚úÖ Campo n√£o existe em alguns registros
await db.set('mixed.1', { name: 'Jo√£o', age: 25 });
await db.set('mixed.2', { name: 'Maria' }); // sem campo 'age'

const ages = await db.distinct('age');
console.log(ages); // [25] - ignora registros sem o campo
```

## M√©todos Relacionados

- [`count()`](/stats/count/) - Conta registros espec√≠ficos
- [`sum()`](/stats/sum/) - Soma valores num√©ricos
- [`avg()`](/stats/avg/) - Calcula m√©dia dos valores
- [`min()`](/stats/min/) - Encontra o menor valor
- [`max()`](/stats/max/) - Encontra o maior valor
- [`aggregate()`](/stats/aggregate/) - Opera√ß√µes estat√≠sticas incluindo distinct

## Dicas de Performance

```javascript
// ‚úÖ Use distinct para an√°lises r√°pidas
const quickAnalysis = await db.distinct('category');

// ‚úÖ Combine com agrega√ß√£o para dados completos
const fullAnalysis = await db.aggregate([
  { type: 'distinct', field: 'category' },
  { type: 'count' }
]);

// ‚úÖ Cache resultados para uso repetido
const categories = await db.distinct('category');
// Use 'categories' m√∫ltiplas vezes sem re-consultar
```
