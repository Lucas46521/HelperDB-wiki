
---
title: every
description: Verifica se todos os elementos de um array satisfazem uma condi√ß√£o
---

# every()

Testa se todos os elementos do array passam no teste implementado pela fun√ß√£o fornecida. Retorna `true` se todos os elementos satisfizerem a condi√ß√£o, caso contr√°rio retorna `false`.

## Sintaxe

```typescript
await db.every(key: string, callback: function): Promise<boolean>
```

## Par√¢metros

- `key` (obrigat√≥rio): Chave do array para testar
- `callback` (obrigat√≥rio): Fun√ß√£o de teste que recebe (element, index, array)

## Retorno

`true` se todos os elementos passarem no teste, `false` caso contr√°rio.

## Exemplos

### Valida√ß√£o de Dados de Usu√°rios

```javascript
await db.set('users', [
  { id: 1, name: 'Jo√£o', age: 25, active: true },
  { id: 2, name: 'Maria', age: 30, active: true },
  { id: 3, name: 'Pedro', age: 35, active: true }
]);

// Verificar se todos os usu√°rios est√£o ativos
const allActive = await db.every('users', user => user.active);
console.log(allActive); // true

// Verificar se todos s√£o maiores de idade
const allAdults = await db.every('users', user => user.age >= 18);
console.log(allAdults); // true

// Verificar se todos t√™m mais de 30 anos
const allOver30 = await db.every('users', user => user.age > 30);
console.log(allOver30); // false (Jo√£o tem 25)
```

### Valida√ß√£o de Estoque

```javascript
await db.set('products', [
  { id: 1, name: 'Notebook', stock: 10, price: 2500 },
  { id: 2, name: 'Mouse', stock: 25, price: 50 },
  { id: 3, name: 'Keyboard', stock: 15, price: 120 }
]);

// Verificar se todos os produtos t√™m estoque
const allInStock = await db.every('products', product => product.stock > 0);
console.log(allInStock); // true

// Verificar se todos custam menos de R$ 3000
const allAffordable = await db.every('products', product => product.price < 3000);
console.log(allAffordable); // true

// Verificar se todos t√™m estoque alto (>20)
const allHighStock = await db.every('products', product => product.stock > 20);
console.log(allHighStock); // false
```

### Valida√ß√£o de N√∫meros

```javascript
await db.set('scores', [85, 92, 78, 96, 88]);

// Verificar se todas as notas s√£o aprova√ß√£o (>=70)
const allPassed = await db.every('scores', score => score >= 70);
console.log(allPassed); // true

// Verificar se todas s√£o notas m√°ximas (100)
const allPerfect = await db.every('scores', score => score === 100);
console.log(allPerfect); // false

await db.set('positiveNumbers', [1, 5, 10, 15, 20]);

// Verificar se todos s√£o positivos
const allPositive = await db.every('positiveNumbers', num => num > 0);
console.log(allPositive); // true
```

### Valida√ß√£o de Configura√ß√µes

```javascript
await db.set('apiKeys', [
  { service: 'payment', key: 'pk_live_123', valid: true },
  { service: 'email', key: 'sg_456', valid: true },
  { service: 'storage', key: 'aws_789', valid: true }
]);

// Verificar se todas as chaves de API s√£o v√°lidas
const allKeysValid = await db.every('apiKeys', apiKey => apiKey.valid);
console.log(allKeysValid); // true

// Verificar se todas t√™m chaves definidas
const allHaveKeys = await db.every('apiKeys', apiKey => 
  apiKey.key && apiKey.key.length > 0
);
console.log(allHaveKeys); // true
```

## Casos de Uso

### ‚úÖ **Valida√ß√£o de Formul√°rios**
```javascript
// Verificar se todos os campos obrigat√≥rios est√£o preenchidos
const allFieldsValid = await db.every('formData', field => 
  field.required ? field.value && field.value.trim().length > 0 : true
);
```

### üîí **Verifica√ß√£o de Permiss√µes**
```javascript
// Verificar se usu√°rio tem todas as permiss√µes necess√°rias
const hasAllPermissions = await db.every('requiredPermissions', permission => 
  userPermissions.includes(permission)
);
```

### üìä **Valida√ß√£o de Qualidade**
```javascript
// Verificar se todos os produtos passaram no controle de qualidade
const allApproved = await db.every('batchProducts', product => 
  product.qualityCheck === 'approved'
);
```

### üéØ **Valida√ß√£o de Estado**
```javascript
// Verificar se todos os servi√ßos est√£o online
const allServicesUp = await db.every('services', service => 
  service.status === 'online'
);
```

## Caracter√≠sticas Importantes

### ‚ö° **Avalia√ß√£o de Curto-Circuito**
- Para na primeira condi√ß√£o falsa encontrada
- N√£o processa elementos desnecess√°rios
- Otimizado para arrays grandes

### üîÑ **Array Vazio**
- Retorna `true` para arrays vazios (vacuous truth)
- Comportamento consistente com JavaScript nativo

### üõ°Ô∏è **Valida√ß√£o Robusta**
- Verifica tipos dos par√¢metros
- Tratamento seguro de erros
- N√£o modifica o array original

## Valida√ß√£o e Erros

```javascript
// ‚ùå Erro: Chave deve ser string
try {
  await db.every(123, item => item.valid);
} catch (error) {
  console.log(error.message); // "First argument (key) needs to be a string"
}

// ‚ùå Erro: Callback deve ser fun√ß√£o
try {
  await db.every('items', 'not a function');
} catch (error) {
  console.log(error.message); // "Second argument (callback) needs to be a function"
}

// ‚úÖ Array vazio retorna true
await db.set('empty', []);
const result = await db.every('empty', item => false);
console.log(result); // true

// ‚úÖ Array n√£o existe √© tratado como vazio
const nonExistent = await db.every('nonexistent', item => true);
console.log(nonExistent); // true
```

## M√©todos Relacionados

- [`some()`](./some.mdx) - Verifica se algum elemento satisfaz a condi√ß√£o
- [`find()`](./find.mdx) - Encontra primeiro elemento que satisfaz a condi√ß√£o
- [`filter()`](./filter.mdx) - Filtra elementos que satisfazem a condi√ß√£o
- [`includes()`](./includes.mdx) - Verifica se array cont√©m um valor
- [`indexOf()`](./indexof.mdx) - Encontra √≠ndice de um elemento

## Combinando com Outros M√©todos

```javascript
// Verificar se todos passaram e obter estat√≠sticas
const allPassed = await db.every('students', student => student.grade >= 70);
if (allPassed) {
  const average = await db.avg('grade', 'students');
  console.log(`Todos aprovados! M√©dia da turma: ${average}`);
}

// Validar antes de opera√ß√£o em lote
const allValid = await db.every('records', record => record.status === 'ready');
if (allValid) {
  await db.updateMany(records.map(r => [r.id, { processed: true }]));
}
```

## Dicas de Performance

```javascript
// ‚úÖ Use every para valida√ß√µes r√°pidas
const canProceed = await db.every('prerequisites', req => req.completed);

// ‚úÖ Combine com agrega√ß√µes para an√°lises completas
const stats = {
  allValid: await db.every('data', item => item.valid),
  totalCount: await db.count('data'),
  validCount: (await db.filter('data', item => item.valid)).length
};

// ‚úÖ Use para controle de fluxo
if (await db.every('services', s => s.healthy)) {
  // Prosseguir com opera√ß√£o
}
```
