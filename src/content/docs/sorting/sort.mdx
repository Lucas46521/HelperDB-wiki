
---
title: sort
description: Ordena dados por um campo espec√≠fico em ordem crescente ou decrescente
---

# sort()

Ordena os dados armazenados por um campo espec√≠fico, permitindo organiza√ß√£o em ordem crescente (asc) ou decrescente (desc). √ötil para classificar registros e preparar dados para exibi√ß√£o.

## Sintaxe

```typescript
await db.sort(key: string, field: string, order?: 'asc' | 'desc'): Promise<any[]>
```

## Par√¢metros

- `key` (obrigat√≥rio): Chave dos dados para ordenar (use "" para todos os dados)
- `field` (obrigat√≥rio): Campo pelo qual ordenar
- `order` (opcional): Ordem da classifica√ß√£o - 'asc' (crescente) ou 'desc' (decrescente). Padr√£o: 'asc'

## Retorno

Array com os dados ordenados pelo campo especificado.

## Exemplos

### Ordenar Usu√°rios por Idade

```javascript
await db.set('user.123', { name: 'Jo√£o', age: 25, salary: 5000 });
await db.set('user.456', { name: 'Maria', age: 30, salary: 6000 });
await db.set('user.789', { name: 'Pedro', age: 22, salary: 4500 });
await db.set('user.101', { name: 'Ana', age: 35, salary: 7000 });

// Ordenar por idade (crescente)
const byAgeAsc = await db.sort('', 'age', 'asc');
console.log(byAgeAsc.map(u => `${u.value.name}: ${u.value.age} anos`));
// ['Pedro: 22 anos', 'Jo√£o: 25 anos', 'Maria: 30 anos', 'Ana: 35 anos']

// Ordenar por idade (decrescente)
const byAgeDesc = await db.sort('', 'age', 'desc');
console.log(byAgeDesc.map(u => `${u.value.name}: ${u.value.age} anos`));
// ['Ana: 35 anos', 'Maria: 30 anos', 'Jo√£o: 25 anos', 'Pedro: 22 anos']

// Ordenar por sal√°rio (decrescente)
const bySalary = await db.sort('', 'salary', 'desc');
console.log(bySalary.map(u => `${u.value.name}: R$ ${u.value.salary}`));
// ['Ana: R$ 7000', 'Maria: R$ 6000', 'Jo√£o: R$ 5000', 'Pedro: R$ 4500']
```

### Ordenar Array de Produtos

```javascript
await db.set('products', [
  { id: 1, name: 'Notebook', price: 2500, rating: 4.5 },
  { id: 2, name: 'Mouse', price: 50, rating: 4.8 },
  { id: 3, name: 'Keyboard', price: 120, rating: 4.2 },
  { id: 4, name: 'Monitor', price: 800, rating: 4.7 }
]);

// Ordenar produtos por pre√ßo (crescente)
const byPrice = await db.sort('products', 'price', 'asc');
console.log(byPrice.map(p => `${p.name}: R$ ${p.price}`));
// ['Mouse: R$ 50', 'Keyboard: R$ 120', 'Monitor: R$ 800', 'Notebook: R$ 2500']

// Ordenar por rating (decrescente)
const byRating = await db.sort('products', 'rating', 'desc');
console.log(byRating.map(p => `${p.name}: ${p.rating}‚≠ê`));
// ['Mouse: 4.8‚≠ê', 'Monitor: 4.7‚≠ê', 'Notebook: 4.5‚≠ê', 'Keyboard: 4.2‚≠ê']

// Ordenar por nome (alfab√©tica)
const byName = await db.sort('products', 'name', 'asc');
console.log(byName.map(p => p.name));
// ['Keyboard', 'Monitor', 'Mouse', 'Notebook']
```

### Ordenar Vendas por Data

```javascript
await db.set('sales.001', { 
  date: '2024-01-15', 
  amount: 1500, 
  customer: 'Jo√£o Silva' 
});
await db.set('sales.002', { 
  date: '2024-01-10', 
  amount: 2300, 
  customer: 'Maria Santos' 
});
await db.set('sales.003', { 
  date: '2024-01-20', 
  amount: 800, 
  customer: 'Pedro Costa' 
});

// Ordenar vendas por data (mais recente primeiro)
const recentSales = await db.sort('', 'date', 'desc');
console.log('Vendas mais recentes:');
recentSales.forEach(sale => {
  console.log(`${sale.value.date}: R$ ${sale.value.amount} - ${sale.value.customer}`);
});
// 2024-01-20: R$ 800 - Pedro Costa
// 2024-01-15: R$ 1500 - Jo√£o Silva  
// 2024-01-10: R$ 2300 - Maria Santos

// Ordenar por valor (maior primeiro)
const topSales = await db.sort('', 'amount', 'desc');
console.log('Maiores vendas:');
topSales.forEach(sale => {
  console.log(`R$ ${sale.value.amount} - ${sale.value.customer}`);
});
// R$ 2300 - Maria Santos
// R$ 1500 - Jo√£o Silva
// R$ 800 - Pedro Costa
```

### Ranking de Jogadores

```javascript
await db.set('players', [
  { id: 1, name: 'Player1', score: 1500, level: 15 },
  { id: 2, name: 'Player2', score: 2300, level: 23 },
  { id: 3, name: 'Player3', score: 1800, level: 18 },
  { id: 4, name: 'Player4', score: 2100, level: 21 }
]);

// Ranking por pontua√ß√£o (maior primeiro)
const scoreRanking = await db.sort('players', 'score', 'desc');
console.log('üèÜ Ranking por Pontua√ß√£o:');
scoreRanking.forEach((player, index) => {
  console.log(`${index + 1}¬∫ ${player.name}: ${player.score} pontos`);
});
// 1¬∫ Player2: 2300 pontos
// 2¬∫ Player4: 2100 pontos  
// 3¬∫ Player3: 1800 pontos
// 4¬∫ Player1: 1500 pontos

// Ranking por n√≠vel
const levelRanking = await db.sort('players', 'level', 'desc');
console.log('üìä Ranking por N√≠vel:');
levelRanking.forEach((player, index) => {
  console.log(`${index + 1}¬∫ ${player.name}: N√≠vel ${player.level}`);
});
```

## Casos de Uso

### üìä **Dashboards e Relat√≥rios**
```javascript
// Top vendedores do m√™s
const topSellers = await db.sort('', 'salesAmount', 'desc');

// Produtos mais vendidos
const bestProducts = await db.sort('inventory', 'soldQuantity', 'desc');

// Clientes por valor total de compras
const topCustomers = await db.sort('', 'totalPurchases', 'desc');
```

### üéØ **Listagens Organizadas**
```javascript
// Lista de funcion√°rios por nome
const employeesByName = await db.sort('', 'fullName', 'asc');

// Produtos por pre√ßo (do menor ao maior)
const productsByPrice = await db.sort('catalog', 'price', 'asc');

// Eventos por data (cronol√≥gico)
const eventsByDate = await db.sort('events', 'startDate', 'asc');
```

### üèÜ **Rankings e Classifica√ß√µes**
```javascript
// Ranking de usu√°rios por pontos
const userRanking = await db.sort('', 'points', 'desc');

// Classifica√ß√£o de times por vit√≥rias
const teamRanking = await db.sort('teams', 'wins', 'desc');
```

## Caracter√≠sticas Importantes

### üî¢ **Tipos de Dados Suportados**
- **N√∫meros**: Ordena√ß√£o num√©rica correta
- **Strings**: Ordena√ß√£o alfab√©tica
- **Datas**: Ordena√ß√£o cronol√≥gica
- **Booleanos**: false vem antes de true

### ‚ö° **Performance Otimizada**
- Algoritmo de ordena√ß√£o eficiente
- Suporte a grandes conjuntos de dados
- Cache autom√°tico para consultas repetidas

### üéØ **Flexibilidade de Uso**
- Funciona com dados globais (key = "")
- Suporte a arrays espec√≠ficos
- Campos aninhados usando nota√ß√£o de ponto

## Valida√ß√£o e Erros

```javascript
// ‚ùå Erro: Par√¢metros obrigat√≥rios
try {
  await db.sort();
} catch (error) {
  console.log(error.message); // "Key and field parameters are required"
}

// ‚ùå Erro: Ordem inv√°lida
try {
  await db.sort('data', 'name', 'invalid');
} catch (error) {
  console.log(error.message); // "Order must be 'asc' or 'desc'"
}

// ‚úÖ Campo n√£o existe em alguns registros
await db.set('mixed.1', { name: 'Jo√£o', age: 25 });
await db.set('mixed.2', { name: 'Maria' }); // sem campo 'age'

const sorted = await db.sort('', 'age', 'asc');
// Registros sem o campo aparecer√£o no final
```

## M√©todos Relacionados

- [`limit()`](./limit.mdx) - Limita o n√∫mero de resultados
- [`skip()`](./skip.mdx) - Pula um n√∫mero de registros
- [`filter()`](./filter.mdx) - Filtra dados por condi√ß√µes
- [`search()`](./search.mdx) - Busca dados por termo
- [`aggregate()`](./aggregate.mdx) - Opera√ß√µes estat√≠sticas nos dados ordenados

## Combinando com Outros M√©todos

```javascript
// Ordenar e limitar (Top 10)
const top10 = await db.sort('', 'score', 'desc')
  .then(sorted => db.limit(10, ''));

// Ordenar, pular e limitar (Pagina√ß√£o)
const page2 = await db.sort('products', 'name', 'asc')
  .then(sorted => db.skip(10, ''))
  .then(skipped => db.limit(10, ''));

// Filtrar e ordenar
const activeUsersSorted = await db.filter('users', user => user.active)
  .then(filtered => db.sort('', 'lastLogin', 'desc'));
```

## Dicas de Performance

```javascript
// ‚úÖ Use sort para preparar dados para exibi√ß√£o
const displayData = await db.sort('products', 'name', 'asc');

// ‚úÖ Combine com limit para pagina√ß√£o eficiente
const firstPage = await db.sort('', 'createdAt', 'desc')
  .then(sorted => db.limit(20, ''));

// ‚úÖ Cache resultados ordenados para reutiliza√ß√£o
const sortedUsers = await db.sort('', 'name', 'asc');
// Use sortedUsers m√∫ltiplas vezes sem re-ordenar

// ‚úÖ Use para an√°lises e relat√≥rios
const salesReport = {
  topProducts: await db.sort('sales', 'quantity', 'desc'),
  recentOrders: await db.sort('orders', 'date', 'desc')
};
```
